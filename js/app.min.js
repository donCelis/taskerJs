"use strict";function crearTarea(e,a,t){var n="",i="";return"completo"===t&&(n="verde",i="tachar"),'\n\t\t<div id="'+e+'" estado="'+t+'">\n\t\t\t<p class="'+i+'">'+a+'</p>\n\t\t\t<i class="ok fas fa-check-circle '+n+'"></i>\n\t\t</div>'}function on(e,a,n){document.addEventListener(e,function(t){var e=document.querySelectorAll(a);t.composedPath().forEach(function(a){e.forEach(function(e){a===e&&n.call(e,t)})})},!0)}function iniciarSesion(e,a){firebase.auth().signInWithEmailAndPassword(e,a).then(function(){console.log("La sesión fue iniciada")}).catch(function(e){var a=e.code,t=e.message;console.log(a+" "+t)})}function sesionActiva(){firebase.auth().onAuthStateChanged(function(e){if(e){e.uid;console.log(e.email),seleSesionActiva.style.display="block",seleIniciarSesion.style.display="none",btnCerrar.style.display="block",nombreUsuario.innerHTML=" de "+e.displayName,console.log("la sesión esta activa");var a=e.providerData;console.log(a)}else seleIniciarSesion.style.display="block"})}function cerrarSesion(){firebase.auth().signOut().then(function(){console.log("Sesión finalizada"),seleIniciarSesion.style.display="block",seleSesionActiva.style.display="none",btnCerrar.style.display="",nombreUsuario.innerHTML=""})}var firebaseConfig={apiKey:"AIzaSyBbCq8NiyEfPbkII91QzbhAqa8VcPAZo68",authDomain:"listatareasf1829152.firebaseapp.com",databaseURL:"https://listatareasf1829152.firebaseio.com",projectId:"listatareasf1829152",storageBucket:"",messagingSenderId:"5124718614",appId:"1:5124718614:web:b8aa39aa3bb5d3ec"};firebase.initializeApp(firebaseConfig);var db=firebase.firestore(),enviarTarea=document.querySelector(".iconAdd"),entrada=document.getElementById("entrada"),tareas=document.querySelector(".tareas");enviarTarea.addEventListener("click",function(){if(""==entrada.value)entrada.placeholder="Campo obligatorio",entrada.style.border="1px solid rgb(231, 76, 60)",entrada.classList.add("error","mover"),setTimeout(function(){entrada.classList.remove("mover")},500);else{db.collection("appTareas").add({nombre:entrada.value,estado:"incompleto",fecha:firebase.firestore.FieldValue.serverTimestamp()}).then(function(e){console.log("Document written with ID: ",e.id),entrada.value=""}).catch(function(e){console.error("Error adding document: ",e)})}}),db.collection("appTareas").orderBy("fecha","desc").onSnapshot(function(e){tareas.innerHTML="",e.forEach(function(e){var a=e.data().nombre,t=e.id,n=e.data().estado;tareas.innerHTML+=crearTarea(t,a,n)})}),entrada.addEventListener("focus",function(){this.classList.remove("error","mover"),this.placeholder="Ingresar tarea",this.style.border="1px solid rgb(41, 128, 185)"}),entrada.addEventListener("blur",function(){this.style.border="1px solid rgba(44, 62, 80, 0.5)"}),on("click",".ok",function(e){this.classList.toggle("verde"),this.previousElementSibling.classList.toggle("tachar");var a=this.parentNode.getAttribute("id");db.collection("appTareas").doc(a).update({estado:"completo"})});var btnSesion=document.querySelector(".iniSesion input");btnSesion.addEventListener("click",function(e){e.preventDefault(),iniciarSesion(document.querySelector("#usuario").value,document.querySelector("#contra").value)});var seleIniciarSesion=document.querySelector(".iniciarSesion"),seleSesionActiva=document.querySelector(".sesionActiva"),btnCerrar=document.querySelector(".cerrar"),nombreUsuario=document.querySelector(".titulo span");sesionActiva(),btnCerrar.addEventListener("click",function(){cerrarSesion()});